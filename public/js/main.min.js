$(document).ready(function(){
	if($("#Ta_tipo_plato_in_id option:selected").text()=='otros'){
		$(".agregar-campo").show();
		$("#va_otros").prop('disabled', false);
	}else{
		$(".agregar-campo").hide();
		$("#va_otros").prop('disabled', true);
	}
	$("#Ta_tipo_plato_in_id").change(function() {
		if($("#Ta_tipo_plato_in_id option:selected").text()=='otros'){
			$(".agregar-campo").show();
			$("#va_otros").prop('disabled', false);
		}else{
			$(".agregar-campo").hide();
			$("#va_otros").prop('disabled', true);
		}
	});
});
$(document).ready(function(){$("#responsive-menu-button").sidr({name:"sidr-main",source:"#navigation"});var a=function(){$(".control-group").removeClass("success");
$(".control-group").removeClass("error");$("label").remove(":contains('OK!')");$(".error").remove();};$("#local").validate({rules:{va_horario:{required:true},va_rango_precio:{required:true},ta_dia_in_id:{required:true},pais:{required:true},departamento:{required:true},provincia:{required:true},distrito:{required:true},va_direccion:{required:true}},messages:{va_rango_precio:{required:"Por favor ingresa un rango de precio"},ta_dia_in_id:{required:"Por favor ingrese dia de atencion"},va_pais:{required:"Por favor seleccione el pais"},departamento:{required:"Por favor seleccione el departamento"},provincia:{required:"Por favor seleccione la provincia"},distrito:{required:"Por favor seleccione el distrito"},va_direccion:{required:"Por favor ingrese la direcci√≥n "}},highlight:function(h){$(h).closest(".control-group").removeClass("success").addClass("error");
},success:function(h){h.text("OK!").addClass("valid").closest(".control-group").removeClass("error").addClass("success");}});$("#restaurante").validate({rules:{va_nombre:{required:true,minlength:4},va_web:{url:true},Ta_tipo_comida_in_id:{required:true}},messages:{va_nombre:{required:"Por favor ingresar el nombre del restaurante",minlength:"Minimo 4 caracteres"},va_web:{url:"Por favor ingresa una Url valida"},Ta_tipo_comida_in_id:{required:"Por favor ingresar un tipo de plato"}},highlight:function(h){$(h).closest(".control-group").removeClass("success").addClass("error");
},success:function(h){h.text("OK!").addClass("valid").closest(".control-group").removeClass("error").addClass("success");}});$("#platos").validate({rules:{va_nombre:{required:true,minlength:3},tx_descripcion:{required:true},Ta_tipo_plato:{required:true}},messages:{va_nombre:{required:"Por favor ingresar el nombre del plato",minlength:"Minimo 3 caracteres"},tx_descripcion:{required:"Por favor ingresar la descripcion"},Ta_tipo_plato:{required:"Por favor ingresar un tipo de plato"}},highlight:function(h){$(h).closest(".control-group").removeClass("success").addClass("error");
},success:function(h){h.text("OK!").addClass("valid").closest(".control-group").removeClass("error").addClass("success");}});var f=function(h){$(h).validate({rules:{va_nombre:{required:true},va_apellidos:{required:true},Ta_rol_in_id:{required:true},va_email:{required:true,email:true},va_contrasenia:{required:true,minlength:6},va_contrasenia2:{required:true,equalTo:"#va_contrasenia",minlength:6}},messages:{va_nombre:{required:"Por favor ingresar el nombre"},va_apellidos:{required:"Por favor ingresar el apellido"},va_email:{required:"Por favor ingresa un Email Valido"},va_contrasenia:{required:"Ingrese la clave",minlength:"Ingresa un password de 6 caracteres a mas"},va_contrasenia2:{required:"Repita la clave",minlength:"Ingresa un password de 6 caracteres a mas",equalTo:"Ingrese el mismo valor de Clave"},Ta_rol_in_id:{required:"Por favor ingresar un rol"}},highlight:function(i){$(i).closest(".control-group").removeClass("success").addClass("error");
},success:function(i){i.text("OK!").addClass("valid").closest(".control-group").removeClass("error").addClass("success");}});};f("#usuario");$("#va_direccion").keyup(function(){var i=$(this).val();
$("#address").val("");var k=$("#distrito option:selected").text();var j=$("#provincia option:selected").text();var h=$("#pais option:selected").text();
$("#address").val(i+", "+k+" , "+j+" , "+h);}).keyup();$("#pais").change(function(i){var h=parseInt($(this).val());$.getJSON("/local/index/jsondepartamento",function(j){if(h==1){$.each(j,function(k,l){$("#departamento").append("<option value="+l.in_iddep+" >"+l.ch_departamento+" </option>");
});}});});$("#departamento").change(function(m){var l=parseInt($(this).val());var h="/local/index/jsonprovincia?iddepa="+l;console.log(l);$.getJSON(h,function(o){$("#provincia").empty();
$("#distrito").empty();$("#provincia").append("<option value=''>Seleccione</option>");$.each(o,function(p,q){$("#provincia").append("<option value="+q.in_idprov+" >"+q.ch_provincia+" </option>");
});});var j=$("#va_direccion").val();var n=$("#distrito option:selected").text();var k=$("#provincia option:selected").text();var i=$("#pais option:selected").text();
$("#address").val(j+", "+n+" , "+k+" , "+i);});$("#provincia").change(function(m){var l=parseInt($("#departamento").val());var o=parseInt($(this).val());
var h="/local/index/jsondistrito?iddepa="+l+"&iddpro="+o;console.log(o);$.getJSON(h,function(p){$("#distrito").empty();$("#distrito").append("<option value=''>Seleccione</option>");
$.each(p,function(q,r){$("#distrito").append("<option value="+r.in_iddis+" >"+r.ch_distrito+" </option>");});});var j=$("#va_direccion").val();var n=$("#distrito option:selected").text();
var k=$("#provincia option:selected").text();var i=$("#pais option:selected").text();$("#address").val(j+", "+n+" , "+k+" , "+i);});var e;function d(){var i=new google.maps.LatLng(-12.055345316962327,-77.04518530000001);
var h={zoom:15,center:i,mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map($("#map_canvas").get(0),h);}$("#search").on("click",function(){d();
$("#address").val("");var j=$("#va_direccion").val();var m=$("#distrito option:selected").text();var l=$("#provincia option:selected").text();var i=$("#pais option:selected").text();
$("#address").val(j+", "+m+" , "+l+" , "+i);$("#mostrar_map").css("display","block");$("#map_canvas").css("display","block");var h=$("#address").val();
var k=new google.maps.Geocoder();k.geocode({address:h},b);});var c=null;function g(i){var j=i.getPosition();$("#de_latitud").html("");$("#de_longitud").html("");
var h=j.lat();var k=j.lng();$("#de_latitud").val(h);$("#de_longitud").val(k);}function b(l,i){if(i=="OK"){var k={center:l[0].geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP};
e=new google.maps.Map($("#map_canvas").get(0),k);e.fitBounds(l[0].geometry.viewport);$("#de_latitud").val(l[0].geometry.location.lat());$("#de_longitud").val(l[0].geometry.location.lng());
var j={position:l[0].geometry.location,draggable:true};var h=new google.maps.Marker(j);google.maps.event.addListener(h,"dragend",function(){g(h);});h.setMap(e);
}else{alert("La direccion es encontrado en google maps : "+i);}}$(".eli").on("click",function(){var i=$(this).attr("data-id");var h=$(this).attr("name");
$("#eli-user").modal("show");console.log(i);$("#verusuario").attr({"data-id":i});$("#verusuario").html("Estas seguro de eliminar al usuario "+h+" ?");});
$(".eli-lo").on("click",function(){var h=$(this).attr("data-id");$("#eli-local").modal("show");console.log(h);$("#verlocal").attr({"data-id":h});$("#verlocal").html("Estas seguro de eliminar el local ?");
});$(".eli-com").on("click",function(){var h=$(this).attr("data-id");$("#eli-com").modal("show");console.log(h);$("#vercom").attr({"data-id":h});$("#vercom").html("Estas seguro de eliminar el comentario ?");
});$(".eli-lo").on("click",function(){var j=$(this).attr("id");var i=$(this).attr("data-name");console.log(j,i);var h=$.ajax({url:"/platos/index/eliminar?id="+j+"&estado="+i,type:"POST",data:{id:j,estado:i}});
if(i=="activo"){$(this).attr("data-name","desactivo");$(this).html("");$(this).removeClass("btn btn-primary");$(this).addClass("btn btn-danger");$(this).append("<i class='icon-trash icon-white'></i> Desactivar");
}else{$(this).attr("data-name","activo");$(this).html("");$(this).removeClass("btn btn-danger");$(this).addClass("btn btn-primary");$(this).append("<i class='icon-trash icon-white'></i>Activar");
}});$(".check-plato").mousedown(function(){var j=$(this).attr("data-id");var i;if(!$(this).is(":checked")){if(confirm("Desea Destacar el plato ?")){var i="si";
var h=$.ajax({url:"/platos/index/cambiaestado?id="+j+"&estado="+i,type:"get"});$(this).prop("checked","checked");$("#"+j).addClass("success");$("#la"+j).removeClass().addClass("label label-success");
$("#la"+j).html("");$("#la"+j).html("Destacado");}}else{var i="no";var h=$.ajax({url:"/platos/index/cambiaestado?id="+j+"&estado="+i,type:"get"});$("#"+j).removeClass("success");
$("#la"+j).removeClass().addClass("label label-important");$("#la"+j).html("");$("#la"+j).html("No Destacado");}});$(".check_rest").mousedown(function(){var j=$(this).attr("data-id");
console.log(j);var i;if(!$(this).is(":checked")){if(confirm("Desea Activar al Restaurante ?")){var i="activo";var h=$.ajax({url:"/restaurante/index/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});
$(this).prop("checked","checked");$("#"+j).addClass("success");$("#la"+j).removeClass().addClass("label label-success");$("#la"+j).html("");$("#la"+j).html("activo");
$("#"+j).closest("tr").remove();}}else{var i="desactivo";var h=$.ajax({url:"/restaurante/index/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});
$("#"+j).removeClass("success");$("#la"+j).removeClass().addClass("label label-important");$("#la"+j).html("");$("#la"+j).html("desactivo");$("#"+j).closest("tr").remove();
}});$(".check").mousedown(function(){var j=$(this).attr("data-id");console.log(j);var i;if(!$(this).is(":checked")){if(confirm("Desea Activar al usuario ?")){var i="activo";
var h=$.ajax({url:"/usuario/index/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});$(this).prop("checked","checked");$("#"+j).addClass("success");
$("#la"+j).removeClass().addClass("label label-success");$("#la"+j).html("");$("#la"+j).html("activo");}}else{var i="desactivo";var h=$.ajax({url:"/usuario/index/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});
$("#"+j).removeClass("success");$("#la"+j).removeClass().addClass("label label-important");$("#la"+j).html("");$("#la"+j).html("desactivo");}});$(".check-com").mousedown(function(){var j=$(this).attr("data-id");
console.log(j);var i;if(!$(this).is(":checked")){if(confirm("Desea Aprobar el comentario ?")){var i="aprobado";var h=$.ajax({url:"/usuario/comentarios/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});
$(this).prop("checked","checked");$("#"+j).addClass("success");$("#la"+j).removeClass().addClass("label label-success");$("#la"+j).html("");$("#la"+j).html("aprobado");
}}else{var i="desaprobado";var h=$.ajax({url:"/usuario/comentarios/cambiaestado?id="+j+"&estado="+i,type:"get",data:{id:j,estado:i}});$("#"+j).removeClass("success");
$("#la"+j).removeClass().addClass("label label-important");$("#la"+j).html("");$("#la"+j).html("desaprobado");}});$("#delete").on("click",function(){var h=$("#verusuario").attr("data-id");
$("#"+h).closest("tr").remove();$("#eli-user").modal("hide");console.log(h);var i=$.ajax({url:"/usuario/index/eliminarusu?id="+h,type:"POST",data:{id:h}});
});$("#delete-local").on("click",function(){var h=$("#verlocal").attr("data-id");$("#"+h).closest("tr").remove();$("#eli-local").modal("hide");console.log(h);
var i=$.ajax({url:"/local/index/eliminarlocal?id="+h,type:"POST",data:{id:h}});});$("#delete-comentario").on("click",function(){var h=$("#vercom").attr("data-id");
$("#"+h).closest("tr").remove();$("#eli-com").modal("hide");console.log(h);var i=$.ajax({url:"/usuario/comentarios/eliminarcomentario?id="+h,type:"POST",data:{id:h}});
});});
